<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>권택준</title>
<style>
body{
	margin: 0;
}
.page {
	position: sticky;
	top: 0;
	width: 100%;
      	height: 100vh;
      	background: linear-gradient(to bottom, #4facfe, #00f2fe);	
}
.button-view{
	position: fixed;
	bottom : 0;
	width:100%;
	height:20vh;
	background: black;
	z-index:10000;
}
</style>
<script async>
let isScrolling = false;
let elements = null;
let elements_pos = null;
window.addEventListener("load", function(){
	elements = document.querySelectorAll("[class='page']");
	for(let i = 0; i < elements.length; i++) elements[i].style.setProperty('z-index', i);
});
window.addEventListener("scroll", function() {
	if (elements && !isScrolling) {
		isScrolling = true;
		requestAnimationFrame(function() {
			let low = 0;
			let high = elements.length;
			while(low < high){
				const mid = Math.floor((low + high) / 2);
				if (0 < elements[mid].getBoundingClientRect().top) high = mid;
				else low = mid + 1;
			}
			const curr = low - 1;
			if(0 <= curr){
				elements[curr].style.setProperty('position', 'relative');
				console.log(window.scrollY + elements[curr].getBoundingClientRect().top);
				elements[curr].style.setProperty('position', 'sticky');
			}
			isScrolling = false;
		});
	}
});
</script>
</head>
<body>

<div class="page">
aaa
</div>
<div class="page">
Test
</div>
<div class="page">
Test
</div>
<!--<div class="page"><h1>빈 페이지</h1></div>-->
</body>
</html>
